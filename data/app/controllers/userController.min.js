function isUserAuthenticated(e,t,n){deps.db.query("SELECT UserID FROM BlendConf.Users WHERE FirstName = ? AND LastName = ? AND Validated = 0",[e,t],function(e,t){if(e)return n(e);if(!t[0])return n({message:"Invalid User"});try{n(null,{userID:t[0].UserID})}catch(r){n(r)}})}function setUserAuthenticated(e,t,n){deps.db.query("UPDATE BlendConf.Users SET Email = ?, Validated = 1, Started = NOW() WHERE UserID = ? ",[e,t],function(e,t){if(e)return n(e);if(t.changedRows===0)return n({message:"Could not update User"});n(null,t)})}function getUserResult(e,t){deps.db.query("SELECT PollResult FROM BlendConf.Users WHERE UserID = ? AND PollResult IS NOT NULL",[e],function(e,n){if(e)return t(e);if(!n[0])return t({message:"No Results for user"});try{t(null,{pollResult:n[0].PollResult})}catch(r){t(r)}})}function getTopUsers(e){var t="SELECT CONCAT(FirstName,' ',LastName) AS Name, PollResult, TIMEDIFF(Completed,Started) AS TimeCompleted, TIME_FORMAT(TIMEDIFF(Completed,Started), '%i:%s') AS FormatedTimeCompleted FROM BlendConf.Users WHERE PollResult IS NOT NULL AND Completed IS NOT NULL HAVING TimeCompleted > 0 ORDER BY PollResult DESC, TimeCompleted ASC LIMIT 10";deps.db.query(t,function(t,n){if(t)return e(t);if(!n[0])return e({message:"No Results"});e(null,{topResults:n})})}var deps=require("../../config/db");module.exports.isUserAuthenticated=isUserAuthenticated;module.exports.setUserAuthenticated=setUserAuthenticated;module.exports.getUserResult=getUserResult;module.exports.getTopUsers=getTopUsers;